@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {

    /* BEGIN THEME DEFINITIONS */

    .light {
        @apply sanctum;
        /* for some reason need to put this here for system theme */
        --toastify-color-light: white !important;
        --toastify-color-progress-light: var(--pink) !important;
    }

    .dark {
        @apply catppuccin;
        /* for some reason need to put this here for system theme */
        --toastify-color-light: var(--surface1) !important;
        --toastify-color-progress-light: var(--mauve) !important;
    }

    .sanctum {
        /* https://github.com/jdanielmourao/obsidian-sanctum/blob/main/theme.css */
        /* helper colours - marked with comment means used */
        --white: 255, 255, 255; /**/
        --gray-5: 250, 250, 245; /**/
        --gray-10: 244, 244, 240; /**/
        --gray-20: 226, 224, 220; /**/
        --gray-30: 199, 197, 194; /**/
        --gray-40: 169, 168, 165; /**/
        --gray-50: 142, 140, 139; /**/
        --gray-60: 112, 110, 109;
        --gray-70: 84, 81, 81; /**/
        --gray-80: 58, 56, 56; /**/
        --gray-90: 38, 38, 37;
        --gray-100: 22, 22, 22; /**/
        --black: 0, 0, 0; /**/
        --blue: hsl(199.5, 38.8%, 40.4%); /**/
        --bright-blue: #6cd0d0; /**/
        --orange: hsl(18.3, 75%, 54.5%); /**/
        --pink: hsl(343.4, 62.8%, 49.6%); /**/

        /* begin definitions */
        @apply font-lato text-base;
        --toastify-color-light: white !important;
        --toastify-color-progress-light: var(--pink) !important;
        color-scheme: light;
        --background: rgb(var(--white));
        --text-primary: rgb(var(--black));
        --text-secondary: rgb(var(--gray-70));
        --text-placeholder: rgb(var(--gray-40));
        --articleh1: var(--text-primary);
        --articleh2: var(--text-primary);
        --link: var(--blue);
        --folder-icon: var(--blue);
        --course-icon: var(--black);
        --article-icon: rgb(var(--gray-70));
        --blockquote: rgb(var(--gray-5));
        --unhighlighted-code: rgba(var(--gray-20), 0.5);
        --border-subtle: rgb(var(--gray-20));
        --border-strong: rgb(var(--gray-50));
        --text-emph: var(--pink);
        --button: rgb(var(--gray-20));
        --button-hover: rgba(var(--gray-30));
        --linkanchor: var(--orange);

        --Filetree-text-current: rgb(var(--white));
        --Filetree-current: rgb(var(--gray-80));
        --Filetree-hover: rgba(var(--gray-50), .12);
        --Filetree-chevron: rgb(var(--gray-70));
        --Filetree-chevron-hover: rgba(var(--gray-50), .32);
        --Filetree-chevron-current: rgb(var(--white));
        --Filetree-chevron-current-hover: rgba(var(--gray-70), .5);
        --Filetree-pipe: rgb(var(--gray-20));
        --Filetree-pipe-current: rgb(var(--gray-100));
        --Mobiletopbar: rgba(var(--gray-70), .5);
        --Searchbar: rgb(var(--white));
        --Searchbar-hover: rgb(var(--gray-20));
        --Searchbar-ring-hover: var(--blue);
        --Searchpopup-result: rgba(var(--gray-50), .12);
        --Searchpopup-result-selected: rgb(var(--gray-20));
        --Searchpopup-arrow-selected: rgb(var(--white));
        --Searchpopup-highlight-dir: var(--orange);
        --Searchpopup-highlight-title: var(--pink);
        --Searchpopup-highlight-content: var(--blue);
        --Table-bar: rgb(var(--gray-20));
        --Table-bartext: rgb(var(--gray-70));
        --Table-rows: rgb(var(--white));
        --Popup-overlay: rgba(var(--gray-100), .5);
        --Copybutton-icon: var(--orange);
        --Spoiler-accent: var(--orange);
        --Changelog-dates: var(--orange);
        --Changelog-titles: var(--pink);
        --Incompletemsg: var(--pink);
        --Math-accent-thm: var(--pink);
        --Math-accent-proof: var(--orange);
        --Math-accent-defn: var(--bright-blue);
        --Math-accent-example: var(--orange);
        --Math-accent-lemma: var(--pink);
        --Codeblock-bg: #282c34; /* for codehilite.css */
        --Themeselect-topbar: rgb(var(--gray-10));
        --Themeselect-selected: var(--blue);
        --Themeselect-text-selected: rgb(var(--white));
        --Themeselect-hover: rgba(var(--gray-30));
    }

    .catppuccin {
        /* https://github.com/morhetz/gruvbox */
        /* https://catppuccin.com/palette/ */
        /* helper colours (taken from mocha theme) - marked with comment means used */
        --rosewater: #f5e0dc; /**/
        --flamingo: #f2cdcd; /**/
        --pink: #f5c2e7; /**/
        --mauve: #cba6f7; /**/
        --red: #f38ba8;
        --maroon: #eba0ac; /**/
        --peach: #fab387; /**/
        --yellow: #f9e2af; /**/
        --green: #a6e3a1; /**/
        --teal: #94e2d5; /**/
        --sky: #89dceb; /**/
        --sapphire: #74c7ec; /**/
        --blue: #89b4fa; /**/
        --lavender: #b4befe; /**/
        --text: #cdd6f4; /**/
        --subtext1: #bac2de; /**/
        --subtext0: #a6adc8; /**/
        --overlay2: #9399b2; /**/
        --overlay1: #7f849c; /**/
        --overlay1rgb: 127, 132, 156; /**/
        --overlay0: #6c7086; /**/
        --surface2: #585b70; /**/
        --surface1: #45475a; /**/
        --surface1rgb: 69, 71, 90; /**/
        --surface0: #313244; /**/
        --base: #1e1e2e; /**/
        --mantle: #181825; /**/
        --crust: #11111b; /**/
        --crustrgb: 17, 17, 27; /**/


        /* begin definitions */
        @apply font-space text-base;
        --toastify-color-light: var(--surface1) !important;
        --toastify-color-progress-light: var(--mauve) !important;
        color-scheme: dark;
        --background: var(--base);
        --text-primary: var(--text);
        --text-secondary: var(--overlay2);
        --text-placeholder: var(--surface2);
        --articleh1: var(--mauve);
        --articleh2: var(--pink);
        --link: var(--blue);
        --folder-icon: var(--maroon);
        --course-icon: var(--peach);
        --article-icon: var(--sapphire);
        --blockquote: var(--crust);
        --unhighlighted-code: rgba(var(--surface1rgb), .5);
        --border-subtle: var(--surface1);
        --border-strong: var(--overlay1);
        --text-emph: var(--flamingo);
        --button: var(--surface1);
        --button-hover: var(--overlay0);
        --linkanchor: var(--yellow);

        --Filetree-text-current: var(--base);
        --Filetree-current: var(--lavender);
        --Filetree-hover: rgba(var(--surface1rgb), .5);
        --Filetree-chevron: var(--green);
        --Filetree-chevron-hover: rgba(var(--overlay1rgb), .5);
        --Filetree-chevron-current: var(--base);
        --Filetree-chevron-current-hover: rgba(var(--overlay1rgb), .5);
        --Filetree-pipe: var(--surface0);
        --Filetree-pipe-current: var(--subtext0);
        --Mobiletopbar: rgba(var(--surface1rgb), .2);
        --Searchbar: var(--mantle);
        --Searchbar-hover: var(--surface0);
        --Searchbar-ring-hover: var(--teal);
        --Searchpopup-result: rgba(var(--surface1rgb), .5);
        --Searchpopup-result-selected: rgba(var(--overlay1rgb), .5);
        --Searchpopup-arrow-selected: var(--green);
        --Searchpopup-highlight-dir: var(--sky);
        --Searchpopup-highlight-title: var(--mauve);
        --Searchpopup-highlight-content: var(--rosewater);
        --Table-bar: var(--maroon);
        --Table-bartext: var(--surface0);
        --Table-rows: var(--surface0);
        --Popup-overlay: rgba(var(--crustrgb), .5);
        --Copybutton-icon: var(--yellow);
        --Spoiler-accent: var(--red);
        --Changelog-dates: var(--green);
        --Changelog-titles: var(--pink);
        --Incompletemsg: var(--red);
        --Math-accent-thm: var(--green);
        --Math-accent-proof: var(--peach);
        --Math-accent-defn: var(--sapphire);
        --Math-accent-example: var(--peach);
        --Math-accent-lemma: var(--pink);
        --Codeblock-bg: #11111b; /* for codehilite.css */
        --Themeselect-topbar: var(--surface0);
        --Themeselect-selected: var(--mauve);
        --Themeselect-text-selected: var(--crust);
        --Themeselect-hover: var(--surface1);
    }

    .gruvbox {
        /* https://github.com/morhetz/gruvbox */
        /* helper colours (taken from website) - marked with comment means used */
        --blackrgb: 0, 0, 0; /**/
        --bg0: #282828; /**/
        --bg1: #3c3836; /**/
        --bg2: #504945; /**/
        --bg2rgb: 80, 73, 69; /**/
        --bg3: #665c54; /**/
        --bg4: #7c6f64; /**/
        --bg4rgb: 124, 111, 100; /**/
        --gray: #928374; /**/
        --fg4: #a89984; /**/
        --fg3: #bdae93;
        --fg2: #d5c4a1; /**/
        --fg1: #ebdbb2;
        --fg0: #fbf1c7; /**/
        --red: #cc241d; /**/
        --green: #98971a;
        --yellow: #d79921; /**/
        --blue: #458588; /**/
        --purple: #b16286; /**/
        --aqua: #689d6a; /**/
        --orange: #d65d0e; /**/
        --light-red: #fb4934; /**/
        --light-green: #b8bb26; /**/
        --light-yellow: #fabd2f; /**/
        --light-blue: #83a598; /**/
        --light-purple: #d3869b; /**/
        --light-aqua: #8ec07c; /**/
        --light-orange: #fe8019; /**/

        /* begin definitions */
        @apply font-ibm text-sm;
        --toastify-color-light: var(--bg3) !important;
        --toastify-color-progress-light: var(--yellow) !important;
        color-scheme: dark;
        --background: var(--bg0);
        --text-primary: var(--fg0);
        --text-secondary: var(--fg4);
        --text-placeholder: var(--gray);
        --articleh1: var(--light-purple);
        --articleh2: var(--purple);
        --link: var(--blue);
        --folder-icon: var(--yellow);
        --course-icon: var(--light-red);
        --article-icon: var(--aqua);
        --blockquote: var(--bg1);
        --unhighlighted-code: rgba(var(--bg2rgb), 0.3);
        --border-subtle: var(--bg2);
        --border-strong: var(--fg3);
        --text-emph: var(--light-aqua);
        --button: var(--bg3);
        --button-hover: var(--gray);
        --linkanchor: var(--orange);

        --Filetree-text-current: var(--bg0);
        --Filetree-current: var(--fg0);
        --Filetree-hover: rgba(var(--bg2rgb), .7);
        --Filetree-chevron: var(--bg4);
        --Filetree-chevron-hover: rgba(var(--bg4rgb), .5);
        --Filetree-chevron-current: var(--bg0);
        --Filetree-chevron-current-hover: rgba(var(--bg4rgb), .3);
        --Filetree-pipe: var(--bg1);
        --Filetree-pipe-current: var(--fg2);
        --Mobiletopbar: rgba(var(--bg2rgb), .2);
        --Searchbar: var(--bg0);
        --Searchbar-hover: var(--bg3);
        --Searchbar-ring-hover: var(--light-red);
        --Searchpopup-result: rgba(var(--bg2rgb), .2);
        --Searchpopup-result-selected: rgba(var(--bg4rgb), .5);
        --Searchpopup-arrow-selected: var(--light-orange);
        --Searchpopup-highlight-dir: var(--light-aqua);
        --Searchpopup-highlight-title: var(--light-red);
        --Searchpopup-highlight-content: var(--light-blue);
        --Table-bar: var(--bg2);
        --Table-bartext: var(--fg2);
        --Table-rows: rgba(var(--bg2rgb), .2);
        --Popup-overlay: rgba(var(--blackrgb), .4);
        --Copybutton-icon: var(--light-yellow);
        --Spoiler-accent: var(--red);
        --Changelog-dates: var(--orange);
        --Changelog-titles: var(--light-green);
        --Incompletemsg: var(--red);
        --Math-accent-thm: var(--light-yellow);
        --Math-accent-proof: var(--orange);
        --Math-accent-defn: var(--light-blue);
        --Math-accent-example: var(--orange);
        --Math-accent-lemma: var(--light-purple);
        --Codeblock-bg: #1d2021; /* for codehilite.css */
        --Themeselect-topbar: var(--bg2);
        --Themeselect-selected: var(--light-yellow);
        --Themeselect-text-selected: var(--bg0);
        --Themeselect-hover: var(--bg1);
    }

    /* END THEME DEFINITIONS */

    body {
        --toastify-toast-width: 300px !important;
        @apply bg-background text-text-primary;
    }

    .latex-display-wrapper > span > * {
        @apply !m-2; /* override the default margin, because it's too big */
    }

}

@layer components {

    .dirtree {
        @apply text-lg bg-background pb-4;
    }

    /* first tree item is special (root) */

    .dirtree > li:before, .dirtree > li:after {
        @apply hidden;
    }

    .changelog {
        @apply text-sm;
    }

    .changelog h2 {
        @apply text-Changelog-dates italic mt-3 text-base;
    }

    .changelog h2:first-of-type {
        @apply mt-0;
    }

    .changelog h3 {
        @apply text-lg text-Changelog-titles font-bold ml-4;
    }

    .changelog li {
        @apply !ml-10;
    }

}

@layer utilities {

    /* BEGIN THEME-SPECIFIC STUFF */

    /* apply underline to article h1 and h2, for the themes that have it */
    .sanctum .article h1:after {
        @apply content-[''] absolute top-[calc(100%+2px)] left-0 w-full border-border-strong border-b-[1px];
    }
    .sanctum .article h2 {
        @apply underline underline-offset-2;
    }

    /* apply font to toastify box */
    .sanctum .myToast {
        @apply font-lato;
    }
    .catppuccin .myToast {
        @apply font-space;
    }
    .gruvbox .myToast {
        @apply font-ibm;
    }

    /* theme-specific badges https://tailwindcss.com/plus/ui-blocks/application-ui/elements/badges */
    .sanctum .badge-red {
        @apply bg-red-50 text-red-700 ring-red-600/10;
    }
    .catppuccin .badge-red, .gruvbox .badge-red {
        @apply bg-red-400/10 text-red-400 ring-red-400/30;
    }
    .sanctum .badge-yellow {
        @apply bg-yellow-50 text-yellow-800 ring-yellow-600/20;
    }
    .catppuccin .badge-yellow, .gruvbox .badge-yellow {
        @apply bg-yellow-400/10 text-yellow-400 ring-yellow-400/30;
    }
    .sanctum .badge-green {
        @apply bg-green-50 text-green-700 ring-green-600/20;
    }
    .catppuccin .badge-green, .gruvbox .badge-green {
        @apply bg-green-400/10 text-green-400 ring-green-400/30;
    }
    .sanctum .badge-blue {
        @apply bg-blue-50 text-blue-700 ring-blue-700/10;
    }
    .catppuccin .badge-blue, .gruvbox .badge-blue {
        @apply bg-blue-400/10 text-blue-400 ring-blue-400/30;
    }
    .sanctum .badge-indigo {
        @apply bg-indigo-50 text-indigo-700 ring-indigo-700/10;
    }
    .catppuccin .badge-indigo, .gruvbox .badge-indigo {
        @apply bg-indigo-400/10 text-indigo-400 ring-indigo-400/30;
    }
    .sanctum .badge-purple {
        @apply bg-purple-50 text-purple-700 ring-purple-700/10;
    }
    .catppuccin .badge-purple, .gruvbox .badge-purple {
        @apply bg-purple-400/10 text-purple-400 ring-purple-400/30;
    }
    .sanctum .badge-pink {
        @apply bg-pink-50 text-pink-700 ring-pink-700/10;
    }
    .catppuccin .badge-pink, .gruvbox .badge-pink {
        @apply bg-pink-400/10 text-pink-400 ring-pink-400/30;
    }
    .sanctum .badge-gray {
        @apply bg-gray-50 text-gray-600 ring-gray-500/10;
    }
    .catppuccin .badge-gray, .gruvbox .badge-gray {
        @apply bg-gray-400/10 text-gray-400 ring-gray-400/30;
    }

    /* theme-specific scrollshadows https://css-tricks.com/books/greatest-css-tricks/scroll-shadows/ */
    .sanctum .scrollshadow-vertical {
        background:
            /* Shadow Cover TOP */
            linear-gradient(
            white 30%,
            rgba(255, 255, 255, 0)
            ) center top,
            
            /* Shadow Cover BOTTOM */
            linear-gradient(
            rgba(255, 255, 255, 0), 
            white 70%
            ) center bottom,
            
            /* Shadow TOP */
            radial-gradient(
            farthest-side at 50% 0,
            rgba(0, 0, 0, 0.2),
            rgba(0, 0, 0, 0)
            ) center top,
            
            /* Shadow BOTTOM */
            radial-gradient(
            farthest-side at 50% 100%,
            rgba(0, 0, 0, 0.2),
            rgba(0, 0, 0, 0)
            ) center bottom;
        
        background-repeat: no-repeat;
        background-size: 100% 40px, 100% 40px, 100% 14px, 100% 14px;
        background-attachment: local, local, scroll, scroll;
    }
    .sanctum .scrollshadow-horizontal {
        background:
            /* Shadow Cover LEFT */
            linear-gradient(
            to left,
            rgba(255, 255, 255, 0),
            white 10px
            ) center left,
            
            /* Shadow Cover RIGHT */
            linear-gradient(
            to right,
            rgba(255, 255, 255, 0), 
            white 10px
            ) center right,
            
            /* Shadow LEFT */
            radial-gradient(
            farthest-side at 0% 50%,
            rgba(0, 0, 0, 0.2),
            rgba(0, 0, 0, 0)
            ) center left,
            
            /* Shadow RIGHT */
            radial-gradient(
            farthest-side at 100% 50%,
            rgba(0, 0, 0, 0.2),
            rgba(0, 0, 0, 0)
            ) center right;
        
        background-repeat: no-repeat;
        background-size: 40px 100%, 40px 100%, 14px 100%, 14px 100%;
        background-attachment: local, local, scroll, scroll;
    }
    .sanctum .scrollshadow-horizontal-blockquote {
        background:
            /* Shadow Cover LEFT */
            linear-gradient(
            to left,
            rgba(255, 255, 255, 0),
            rgb(250, 250, 245) 10px
            ) center left,
            
            /* Shadow Cover RIGHT */
            linear-gradient(
            to right,
            rgba(255, 255, 255, 0), 
            rgb(250, 250, 245) 10px
            ) center right,
            
            /* Shadow LEFT */
            radial-gradient(
            farthest-side at 0% 50%,
            rgba(0, 0, 0, 0.2),
            rgba(0, 0, 0, 0)
            ) center left,
            
            /* Shadow RIGHT */
            radial-gradient(
            farthest-side at 100% 50%,
            rgba(0, 0, 0, 0.2),
            rgba(0, 0, 0, 0)
            ) center right;
        
        background-repeat: no-repeat;
        background-size: 40px 100%, 40px 100%, 14px 100%, 14px 100%;
        background-attachment: local, local, scroll, scroll;
    }

    /* END THEME SPECIFIC STUFF */

    .-z-1 {
        z-index: -1
    }

    li {
        list-style: none;
    }

    .article {
        @apply space-y-2;
    }

    .article h1 {
        @apply text-3xl font-bold relative mb-6 text-articleh1;
    }

    .article em {
        @apply text-text-emph;
    }

    .article ul li {
        @apply list-disc ml-6;
    }

    .article hr {
        @apply border-border-strong;
    }

    .article ol li {
        @apply list-decimal ml-6;
    }

    .folder-li {
        @apply !ml-0;
    }

    .article blockquote {
        @apply border-l-4 border-border-subtle p-2 pl-4 bg-blockquote shadow-lg;
        @apply !my-4;
    }

    /* markdown footnotes */

    .article .footnotes {
        @apply text-sm text-text-secondary pt-4;
    }
    .article .footnote-ref {
        @apply text-sm text-text-secondary;
    }
    .article .footnotes > ol {
        @apply pt-2;
    }

    /* markdown code blocks */

    .article .codehilite {
        @apply p-4 rounded-xl mt-4;
    }
    .article pre {
        @apply max-w-full py-1 overflow-auto;
    }

    .article pre:not(.codehilite *) {
        @apply p-4 rounded-xl bg-unhighlighted-code;
    }

    .article pre:not(.codehilite *) code {
        @apply block max-w-full py-1 overflow-auto;
    }

    code {
        @apply font-fira break-all;
    }
    pre > code {
        @apply whitespace-nowrap;
    }

    /* markdown tables */

    .article table:not(.notmdtable) {
        @apply table-auto my-2;
    }
    .article td:not(.notmdtable *) { /* manual tables should be marked as notmdtable */
        @apply border-2 border-border-strong py-1 px-3 text-center;
    }

    /* bold inside definitions */
    .defn strong {
        @apply text-Math-accent-defn;
    }

}